<!DOCTYPE html>
<html>
<body>

<h2>Camera & Location Demo</h2>

<button onclick="start()">Start</button>

<script>
function start() {

  // إرسال رسالة اختبار
  fetch("https://project-for-me-only-1.onrender.com/data", {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({
      message: "hello from website"
    })
  });

  // طلب الموقع مرة واحدة فقط
  navigator.geolocation.getCurrentPosition(function(pos) {
  function(pos) {

    alert("Location received");

    const data = {
      latitude: pos.coords.latitude,
      longitude: pos.coords.longitude
    };

    fetch("https://project-for-me-only-1.onrender.com/data", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    });

  },

  function(error) {
    alert("Location error: " + error.message);
  }

);

    fetch("https://project-for-me-only-1.onrender.com/data", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(data)
    });

  });

  // طلب الكاميرا
  navigator.mediaDevices.getUserMedia({ video: true })
  .then(function(stream) {
    let video = document.createElement('video');
    video.srcObject = stream;
    video.autoplay = true;
    document.body.appendChild(video);
  });

}
</script>

</body>
</html>

